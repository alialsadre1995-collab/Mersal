<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>ArabChat Pro</title>
<script src="/socket.io/socket.io.js"></script>
<style>
  :root{
    --bg:#0d0f13;--card:#151923;--muted:#6f7a8a;--accent:#3aa0ff;
    --ok:#19c37d;--warn:#ffcc00;--err:#ff5c5c;--line:#212837;
    --gold:#f5c542;--delegate:#8be9fd;
    --composerH: 100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{background:var(--bg);color:#e9edf5;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Tahoma,sans-serif}

  .app{height:100svh;display:flex;flex-direction:column;max-width:900px;margin:0 auto;
       padding-bottom:env(safe-area-inset-bottom)}

  .topbar{background:var(--card);border-bottom:1px solid var(--line);
          padding:10px 12px;display:flex;align-items:center;gap:10px;position:sticky;top:0;z-index:5}
  .title{font-weight:700}
  .pill{margin-inline-start:auto;background:#0f131c;border:1px solid var(--line);
        padding:4px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
  .toggleSide{background:#0f131c;border:1px solid var(--line);border-radius:8px;padding:6px 10px;color:#e9edf5}

  .content{flex:1;display:flex;min-height:0}
  .chat{flex:1;display:flex;flex-direction:column;min-width:0}
  .msgs{flex:1;overflow:auto;padding:10px;scroll-behavior:smooth;padding-bottom:var(--composerH)}
  .sys{color:var(--muted);font-size:13px;margin:8px 0}
  .row{display:flex;gap:8px;align-items:flex-start;margin:6px 0}
  .flag{width:18px;height:12px;border:1px solid #0002;object-fit:cover;margin-top:3px}
  .bubble{background:#0f131c;border:1px solid var(--line);padding:8px 10px;border-radius:10px;max-width:100%;word-break:break-word}
  .nick{font-weight:700;margin-inline-end:6px}

  .side{flex:0 0 180px;width:180px;overflow:auto;background:#0f131c;border-inline-start:1px solid var(--line)}
  .side h4{margin:10px;font-size:14px;color:var(--muted)}
  .user{display:flex;align-items:center;gap:8px;padding:8px 10px;border-top:1px solid #0b0e14;cursor:pointer}
  .user:hover{background:#101522}
  .ranks{margin-inline-start:auto;display:flex;gap:6px;font-size:13px}

  .composer{position:sticky;bottom:0;background:var(--
